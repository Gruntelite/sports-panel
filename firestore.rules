rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // Users can create their own user document upon signup.
    // They can only read/update their own document after creation.
    match /users/{userId} {
      allow create: if request.auth.uid == userId;
      allow read, update: if request.auth.uid == userId;
    }

    // Anyone can check if a club name exists (read).
    // Anyone can create a new club (signup process).
    // Once created, only authenticated users can interact with it (we'll refine this later).
    match /clubs/{clubId} {
      allow read, create: if true;
      allow update, delete: if request.auth != null;

        // Settings can be created during signup.
        // Can be read/updated by authenticated users.
        match /settings/{settingId} {
             allow read, write: if request.auth != null || request.method == 'create';
        }
    }
  }
}
