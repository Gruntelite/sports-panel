# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

runConfig:
  # Increase this value if you'd like to automatically spin up
  # more instances in response to increased traffic.
  maxInstances: 1
  # The following secrets are required for the app to function.
  # They will be granted to your backend's service account.
  # Ensure you have the Secret Manager and Cloud Build APIs enabled in your project.
  maxDuration: 120s
  secrets:
    - FIREBASE_API_KEY
    - FIREBASE_AUTH_DOMAIN
    - FIREBASE_PROJECT_ID
    - FIREBASE_STORAGE_BUCKET
    - FIREBASE_MESSAGING_SENDER_ID
    - FIREBASE_APP_ID
    - FIREBASE_MEASUREMENT_ID
    - firestore-stripe-payments-STRIPE_API_KEY
    - STRIPE_WEBHOOK_SECRET
    - META_PIXEL_ID
    - META_ACCESS_TOKEN
    - GMAIL_APP_PASSWORD
    - STRIPE_CONNECT_SECRET_KEY
    - STRIPE_CONNECT_WEBHOOK_SECRET

# Defines a scheduled job that will be triggered by Cloud Scheduler.
# The job will send a POST request to the specified path.
# This is ideal for tasks like daily email processing.
scheduledJobs:
- path: /__run/processQueuedEmailsFlow
  schedule: "every 24 hours"

# Defines the Cloud Functions that will be deployed with your backend.
# The entryPoint should be the name of the exported function.
# The cloudFunction section should be in the root of the file.
cloudFunctions:
  - entryPoint: onFileDelete
    source: src/functions/index.ts
  - entryPoint: monthlySubscriptionCheck
    source: src/functions/index.ts
